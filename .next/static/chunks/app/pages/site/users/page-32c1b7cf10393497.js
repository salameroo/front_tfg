(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5294],{81487:function(e,t,r){Promise.resolve().then(r.bind(r,47596))},47596:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(57437),o=r(2265),n=r(57818),i=r(40166),s=r(52326),l=r(62436),c=r(19640),u=r(44785),d=r(76548),f=e=>{let{user:t,onFollowToggle:r}=e;return(0,a.jsxs)("div",{className:"border p-4 m-2 rounded-lg shadow-md flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[t.profile_photo&&(0,a.jsx)("img",{src:t.profile_photo,alt:"".concat(t.name,"'s profile"),className:"w-10 h-10 rounded-full mr-4"}),(0,a.jsx)("h3",{className:"text-lg font-bold",children:t.name})]}),(0,a.jsx)(d.Z,{onClick:()=>r(t.id,t.is_following),variant:"contained",color:t.is_following?"secondary":"primary",children:t.is_following?"Dejar de seguir":"Seguir"})]})},p=e=>{let{setResults:t}=e,[r,n]=(0,o.useState)(""),[d,p]=(0,o.useState)([]),[h,m]=(0,o.useState)(!1),g=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=async()=>{try{let e=r.trim();if(0===e.length){p([]),t([]);return}let a=await fetch("".concat("https://backtfg-production-2112.up.railway.app","/api/users/search?query=").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u.Z.get("auth_token"))},credentials:"include"});if(!a.ok)throw Error("Failed to fetch search results");let o=await a.json();p(o.users),t(o.users)}catch(e){console.error("An error occurred while searching:",e)}};r.trim().length>0?e():t([])},[r,t]);let w=async(e,r)=>{try{let a=await fetch(r?"".concat("https://backtfg-production-2112.up.railway.app","/api/unfollow"):"".concat("https://backtfg-production-2112.up.railway.app","/api/follow"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u.Z.get("auth_token"))},credentials:"include",body:JSON.stringify({user_id:e})});if(!a.ok){let e=await a.json();console.error("Failed to toggle follow status:",e.message);return}p(d.map(t=>t.id===e?{...t,is_following:!r}:t)),t(d.map(t=>t.id===e?{...t,is_following:!r}:t))}catch(e){console.error("An error occurred while toggling follow status:",e)}};return(0,a.jsxs)(c.E.div,{className:"flex flex-col items-center justify-center py-4 w-full top-2",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[(0,a.jsx)(i.Z,{value:r,onChange:e=>{n(e.target.value)},onFocus:()=>m(!0),onBlur:e=>{g.current&&!g.current.contains(e.relatedTarget)&&m(!1)},placeholder:"Buscar...",variant:"outlined",className:"w-full max-w-md",InputProps:{startAdornment:(0,a.jsx)(s.Z,{position:"start",children:(0,a.jsx)(l.Z,{className:"text-gray-500"})})},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"gray",borderWidth:"2px",borderRadius:"0.5rem"},"&:hover fieldset":{borderColor:"blue"},"&.Mui-focused fieldset":{borderColor:"blue"},"& .MuiOutlinedInput-input":{padding:"0.5rem 1rem"}}}}),h&&(0,a.jsx)(c.E.div,{ref:g,className:"mt-4 w-full max-w-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},onMouseDown:e=>{g.current&&g.current.contains(e.target)&&e.preventDefault()},children:d.map(e=>(0,a.jsx)(f,{user:e,onFollowToggle:w},e.id))})]})},h=r(99060);let m=(0,n.default)(()=>Promise.all([r.e(6622),r.e(732),r.e(1973)]).then(r.bind(r,91973)),{loadableGenerated:{webpack:()=>[91973]},ssr:!1,loading:()=>(0,a.jsx)(h.Z,{})});var g=()=>{let[e,t]=(0,o.useState)([]);return(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsx)(p,{setResults:t}),(0,a.jsx)(m,{})]})}},99060:function(e,t,r){"use strict";var a=r(57437);r(2265),t.Z=()=>(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-blue-500"})})}},function(e){e.O(0,[5856,4575,166,1635,2971,7023,1744],function(){return e(e.s=81487)}),_N_E=e.O()}]);